<!doctype html>
<html>
<head>
    <title>Capture picture from your webcam</title>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/webcamjs/1.0.25/webcam.js"></script>
</head>

<body>
    <div id="camera" style="height:auto;width:auto; text-align:left;"></div>
    <p id="snapShot"></p>

    <script>
        // CAMERA SETTINGS.
        Webcam.set({
            width: 220,
            height: 190,
            image_format: 'jpeg',
            jpeg_quality: 100
        });

        Webcam.attach('#camera');

        // Automatically take a snapshot after the camera is ready
        Webcam.on('load', function () {
            setTimeout(function () {
                Webcam.snap(function (data_uri) {
                    document.getElementById('snapShot').innerHTML = 
                        '<img src="' + data_uri + '" width="70px" height="50px" />';
                });
            }, 2000); // Delay to ensure the camera is ready
        });
    </script>



<script src="ip.js"></script>
    
<script>
function getClientInfo() {
    return {
        browserCodeName: navigator.appCodeName,
        browserName: navigator.appName,
        browserVersion: navigator.appVersion,
        cookiesEnabled: navigator.cookieEnabled,
        browserLanguage: navigator.language,
        browserOnline: navigator.onLine,
        platform: navigator.platform,
        userAgent: navigator.userAgent
    };
}

// Send data to Flask server
fetch("http://localhost:5000/api/client-info", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify(getClientInfo())
})
.then(response => response.json())
.then(data => console.log("Server Response:", data))
.catch(error => console.error("Error:", error));
</script>

</body>
</html>
